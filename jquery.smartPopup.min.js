!function(e){"use strict";"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";function t(){return u&&u.initAt?((new Date).getTime()-u.initAt)/1e3:0}function n(e,t){if(!e||!e.snoozed)return!1;var n=new Date(e.snoozed+864e5*t.snoozeWaitInDays);return new Date>n}function i(e){var t=JSON.stringify(e);document.cookie="_jqsmartpopup="+(t||"")+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"}function o(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var n=e[t];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf("_jqsmartpopup=")){var i=n.substring("_jqsmartpopup=".length,n.length);return JSON.parse(i)}}return null}{if(void 0===e.fn.smartPopup){var r=e.smartPopup=function(t){return e(window).smartPopup(t)},s=!1,u={},a={},p={init:function(t){if(!s&&(a=e.extend({},r.defaults,t),s=!0,u=o(),null===u?u={views:1,initAt:(new Date).getTime(),registered:!1,snoozed:!1}:u.views++,i(u),!u.registered))return a.utmSource&&new RegExp("utm_source="+a.utmSource.toLowerCase()).test(location.search.toLowerCase())?(u.registered=!0,void i(u)):void(n(u,a)&&(u.snoozed=!1,i(u)))},snooze:function(){u.snoozed=(new Date).getTime(),i(u)},status:function(){return u.registered?"User is a known to be registered":u.snoozed?"User has snoozed notifications":p.canShow()?"User is able to be shown notifications":"User has not met the criteria to show the notification"},canShow:function(){if(u.registered||u.snoozed)return!1;if(a.pageViews&&a.timeOnSite){var e=a.pageViews<=u.views,n=a.timeOnSite<=t();return e||n}return a.pageViews?a.pageViews<=u.views:!a.timeOnSite||a.timeOnSite<=t()}};return e.fn.smartPopup=function(t){return p[t]?p[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.smartPopup"):p.init.apply(this,arguments)},r}e.error("smartPopup plugin has already been initialized")}});
